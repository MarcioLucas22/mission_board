{% load static %}
<div class="container-fluid">
    <div class="row flex-nowrap">
        <div class="col-auto px-0 bg-dark position-fixed start-0 top-0 d-flex flex-column min-vh-100" id="sidebar" style="z-index: 1030;">
            <div class="d-flex flex-column px-3 pt-2 text-white flex-grow-1">
                <div class="logo-container">
                    <a href="{% url 'home' %}" class="d-flex align-items-center text-white text-decoration-none">
                        <img src="{% static 'images/logo.svg' %}" alt="Logo" class="img-fluid logo">
                        <span class="menu-text ms-2">Mission Board</span>
                    </a>
                </div>
                <div class="w-100 mb-3">
                    <button class="btn btn-dark d-md-none position-absolute end-0 me-3" type="button" id="sidebarCollapse">
                        <i class="bi bi-list"></i>
                    </button>
                </div>
                <ul class="nav nav-pills flex-column mb-sm-auto mb-0 w-100 flex-grow-1" id="menu">
                    <li class="nav-item w-100">
                        <a href="{% url 'home' %}" class="nav-link px-0 text-white">
                            <i class="bi bi-house"></i> <span class="menu-text ms-2">Home</span>
                        </a>
                    </li>
                    <li class="nav-item w-100">
                        <a href="{% url 'task_list' %}" class="nav-link px-0 text-white">
                            <i class="bi bi-check2-square"></i> <span class="menu-text ms-2"> Minhas Tarefas</span>
                        </a>
                    </li>
                    <li class="nav-item w-100">
                        <a href="{% url 'goal_list' %}" class="nav-link px-0 text-white">
                            <i class="bi bi-trophy"></i> <span class="menu-text ms-2">Metas e Objetivos</span>
                        </a>
                    </li>
                    <li class="nav-item w-100">
                        <a href="#" class="nav-link px-0 text-white">
                            <i class="bi bi-gear"></i> <span class="menu-text ms-2">Configurações</span>
                        </a>
                    </li>
                </ul>
        
                <!-- Separador -->
                <hr class="border-secondary my-3">

                <ul class="d-flex align-items-center flex-column mx-auto mb-3 list-unstyled">
                    <li class="nav-item w-100 mt-auto">
                        <form action="{% url 'logout' %}" method="post" style="display: inline;">
                            {% csrf_token %}
                            <button type="submit" class="nav-link px-0 text-white" style="background: none; border: none; padding: 0;">
                                <i class="bi bi-box-arrow-right"></i> <span class="menu-text ms-2">Sair</span>
                            </button>
                        </form>
                    </li>
                </ul>                                
            </div>
        </div>
        
        <!-- Elemento espaçador para evitar sobreposição -->
        <div class="col-auto" style="width: 250px;"></div>
    </div>
</div>

<style>
    #sidebar {
        transition: all 0.3s;
        height: 100vh;
        overflow-y: auto;
    }

    .logo-container {
        padding: 10px 10px 10px 0;
    }

    #sidebar.collapsed {
        width: 4.5rem !important;
    }

    #sidebar.collapsed .menu-text {
        display: none;
    }

    #sidebar.collapsed + div {
        width: 4.5rem !important;
    }

    @media (max-width: 767.98px) {
        #sidebar {
            width: 4.5rem;
        }

        #sidebar .menu-text {
            display: none;
        }

        #sidebar.expanded {
            width: 250px !important;
        }

        #sidebar.expanded .menu-text {
            display: inline;
        }

        #sidebar + div {
            width: 4.5rem !important;
        }

        #sidebar.expanded + div {
            width: 250px !important;
        }
    }
</style>

<script>
    document.getElementById('sidebarCollapse').addEventListener('click', function() {
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.toggle('expanded');
    });
</script>